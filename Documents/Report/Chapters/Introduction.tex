% Introduction to Master Thesis

\section{Background}


At a library, staff absence can cause problems and result in a shortage of staff with a special competence. If a worker is unavailable a certain day due to a meeting or illness it would require a stand-in to fill the vacancy. Therefore, it is of great interest to create schedules with as many skilled stand-ins as possible to overcome such disturbances, when they occur. 

The problem addressed in this thesis work concerns the library staff at the Central Library of Norrköping. The library has more than 40 employees and the culturally important building from the 1950's is known to all inhabitants of Norrköping. The library is open weekdays between 08:00 and 20:00 and during weekends between 11:00 and 16:00. The generous opening times also creates a challenge for the library as it requires a large pool of well coordinated personnel to keep it running. In addition, the library also provides its services to one other smaller library. This creates a challenge for the library schedulers.

\section{Problem description}

The task we were given was to create a ten week schedule for all workers with a high number of stand ins at all days, given the workers' individual availability schedules and the demands listed and explained in this section. 

\subsection{Description of the daily tasks at the library} \label{section:library_tasks}
The most important activity at a library is the activity directed towards the public. This includes book loan services as well as providing customers with helpful information about the resources at the disposal of the library. These activities are referred to as "outer tasks". In addition, the book collection must be maintained, the returned books must be sorted and put back to the shelves, the web page must be updated and so on. Such work is often referred to as "inner work" and this non-public work is an equally important part of the everyday activities at the library. 

Three main outer task types can be identified at the library of Norrköping, working in the service counter (sv. expiditionsdisken), working in the information counter (sv. informationsdiken)  and assembling books which are to be sent to other libraries according to the "fetch list" (sv. plocklista). The fetch list is a task type for which the worker is scheduled during a whole day, while the other task types have two to five hour shifts. The outer tasks can be performed by either librarians or both, as described in Table \ref{tab:Outer_Tasks}.

\begin{table}[h]
\centering
\caption{Outer tasks can be performed exclusively by librarians or by both librarians and assistants.}
\label{tab:Outer_Tasks}
\begin{tabularx}{\textwidth}{|l|l|X|}
\hline
%-------------------------------------------------------------------
\textbf{Task} & \textbf{Description} & \textbf{Qualification}\\ \hline 
%------------------------------------------------------------------- 
\specialcell[t]{Service counter \\ (Exp)}  & \specialcell[t]{Administring loans, library cards\\ and the loaning machine} & \specialcell[t]{Librarian or \\  assistant} 
%\begin{tabular}[x]{@{}c@{}}\\\end{tabular}  
\\ \hline
%-------------------------------------------------------------------
\specialcell[t]{Information counter \\ (Info)} & \specialcell[t]{Handling questions \\about the library's resources.} & Librarian
\\ \hline 
%-------------------------------------------------------------------
\specialcell[t]{Fetch list \\(PL)} & \specialcell[t]{Fetching books that are to be \\sent to other libraries.} & \specialcell[t]{Librarian  or \\  assistant}
\\ \hline 
%-------------------------------------------------------------------
\specialcell[t]{Hageby \\(HB)} & \specialcell[t]{Handling librarian tasks at the filial \\ Hageby during weekends.} & Librarian
\\ \hline 
%-------------------------------------------------------------------
\specialcell[t]{Library on Wheels \\(BokB)} & \specialcell[t]{Driving the Library on Wheels \\ to different areas of town.} & Librarian
\\ \hline 
%-------------------------------------------------------------------
\end{tabularx}
\end{table} 

Since the number of visitors at the library varies throughout the day and also during different days of the week, so does the demand for personnel for the three tasks. The demand of personnel for the different task types is illustrated in Table \ref{tab:Outer_Task_Demand}, according to figures given by the library. 



\begin{table}[h]
\centering
\caption{Demand of staff for the three daily tasks.}
\label{tab:Outer_Task_Demand}
\begin{tabularx}{\textwidth}{|X|l|l|l|l|X|}
\hline
%-------------------------------------------------------------------
\textbf{Day} & \textbf{Time} & \textbf{Exp demand} & \textbf{Info demand} & \textbf{PL demand\footnote{The Fetch list is a whole day task covering three consecutive shifts which must be performed by the same worker.}}
\\ \hline 
%------------------------------------------------------------------- 
Mon-Fri & 08:00-10:00 & 2 & 2 & 1
\\ \hline 
%------------------------------------------------------------------- 
Mon-Fri & 10:00-13:00 & 3 & 3 & 1
\\ \hline 
%-------------------------------------------------------------------
Mon-Fri & 13:00-16:00  & 3 & 3 & 1
\\ \hline 
%-------------------------------------------------------------------
Mon-Fri & 16:00-20:00 & 3 & 3 & -
\\ \hline 
%-------------------------------------------------------------------
Sat & 11:00-16:00  & 3 & 3 & -
\\ \hline 
%------------------------------------------------------------------- 
Sun & 11:00-16:00  & 3 & 3 & -
\\ \hline 
%------------------------------------------------------------------- 
\end{tabularx}

\end{table} 

As in the case with most libraries, the Central Library of Norrköping also has responsibilities that fall outside of its normal daily activities. One such responsibility is the running of a smaller library filial in Hageby, situated in a suburban area of Norrköping, during weekends. It is decided that only librarians are qualified for this task, as it implies some tasks that need certain knowledge.

Table \ref{tab:Hageby_Demand} shows the demand of staff at Hageby. Worth noting is that it is the same person working at Hageby a weekend due to a couple of reasons. Since a worker is supposed to work both Saturday and Sunday when due for a weekend, it is more desirable to let the worker focus on the same task both days. Furthermore, since Hageby is located in a suburban, some travel distance is required to reach it. This is compensated by letting the worker at Hageby be free from work Friday evening, which otherwise is included in the weekend work. 

\begin{table}[H]
\centering
\caption{Demand of staff at Hageby}
\label{tab:Hageby_Demand}
\begin{tabularx}{0.5\textwidth}{|l|l|X|}
\hline
%-------------------------------------------------------------------
\textbf{Day} & \textbf{Time} & \textbf{HB demand}
\\ \hline 
%%------------------------------------------------------------------- 
Sat & 11:00-16:00  & 1 
\\ \hline 
%%-------------------------------------------------------------------
Sun & 11:00-16:00  & 1 
\\ \hline 
\end{tabularx}
\end{table} 

Similarly, only a handful librarians are qualified for the task known as the "Library on Wheels" (sv. Bokbussen), which is a library bus that provides citizens in remoter areas of the city with books and other library services. The Library on Wheels only operates a few times a week and the schedule differs between odd and even weeks.

\begin{table}[!h]
\centering
\caption{Demand of staff Library on Wheels}
\label{tab:LOW_Demand}
\begin{tabularx}{0.80\textwidth}{|l|X|X|X|X|X|}
\hline
%%-------------------------------------------------------------------
 \textbf{Odd Week} & \textbf{Mon} & \textbf{Tue} & \textbf{Wed} & \textbf{Thu} & \textbf{Fri} 
 \\ \hline 
%%------------------------------------------------------------------- 
\rowcolor{Gray} 
08:00-10:00 & 1 & 0 & 1 & 1 & 1 
\\ \hline 
%%------------------------------------------------------------------- 
\rowcolor{Gray} 
16:00-20:00 & 1 & 0 & 1 & 1 & 0 
\\ \hline 
%%-------------------------------------------------------------------
 \textbf{Even Week} & \textbf{Mon} & \textbf{Tue} & \textbf{Wed} & \textbf{Thu} & \textbf{Fri} 
 \\ \hline 
%%------------------------------------------------------------------- 
\rowcolor{Gray} 
08:00-10:00 & 1 & 0 & 1 & 1 & 0 
\\ \hline 
%%------------------------------------------------------------------- 
\rowcolor{Gray} 
16:00-20:00 & 0 & 0 & 1 & 1 & 0 
\\ \hline 
\end{tabularx}
\end{table}

Apart from the outer work described above, there is also inner work at the library which sometimes need to be scheduled. One such type of inner work is meetings, as it concerns a large number of staff. Both library meetings, scheduled for the whole work force, and department meetings, scheduled only a subset of workers, exist. The library meetings are fixed in time and take place every fifth weeks on Monday mornings 8:15-10:00 while the department meetings are more flexible and take place every fifth week. For this, all department members must be available. Only three departments have scheduled meetings: the child department, the adult department and the media department.

\subsection{Personnel attributes}

At a library, the main group of workers are librarians and assistants (also janitors, cleaners, security guards etc.). The librarians make sure the library's resource collection is up to date, that the visitors find what they're looking for and perform a larger number of inner tasks. Assistants can perform most of theses tasks, while others require librarian competence.

The Central Library of Norrköping currently has 39 workers, 23 of which are librarians and 16 of which are assistants. All staff have different availability for performing tasks, depending on their working hours and the amount of inner work they are in charge of. In the standard case, each worker is assigned one evening per week and once per five weeks he/she is assigned to work during the weekend. The following week after a weekend is compensated by two free days, placed according to the wishes of the worker.

Let us consider a sample worker who is qualified for the same tasks as a librarian, works full time and is also assigned to work on Wednesday evenings. The worker is also assigned to work weekend on the fourth week and has chosen to take out its days off on Thursdays and Fridays on week five. The workers availability is thus illustrated in table \ref{tab:Bob_avail}. The schedule repeats itself after five weeks and illustrates only the availability for tasks but says nothing about whether the worker has been assigned any tasks or not.

All workers have a five week schedule in the same manner as the sample worker. However, in order to meet the weekend demands illustrated by Tables \ref{tab:Outer_Task_Demand}, \ref{tab:LOW_Demand} and \ref{tab:Hageby_Demand}, it is evident that not all workers can be assigned for weekend work at week 4. Instead, a worker's schedule should be seen as a \textit{relative schedule}, which can be shifted by whole weeks. We refer to this as the \textit{week rotation}.

The relative schedule is relative to the \textit{overall schedule} for the library. If the sample worker for example has week rotation 1, this means the weekend week in his relative schedule would be shifted to week 1 in the overall schedule. In Table \ref{tab:Bob_avail}, the weekend rotation is 4.



\begin{table}[!h]
\centering
\caption{Availability schedule for a sample worker. Yellow signifies that the worker is available. In parenthesis, the weekend shift. The week rotation is 4}
\label{tab:Bob_avail}
\begin{tabularx}{\textwidth}{|X|l|l|l|l|l|l|l|X|}
\hline
%-------------------------------------------------------------------
\textbf{Week 1}& \colcell \textbf{Mon} & \colcell \textbf{Tue} & \colcell \textbf{Wed} & \colcell \textbf{Thu} & \colcell \textbf{Fri} & \colcell \textbf{Sat} & \colcell \textbf{Sun}
\\ \hline 
%%------------------------------------------------------------------- 
%\rowcolor{Gray} 
\colcell 08:00-10:00 (11:00-16:00) & \colcelltwo & \colcelltwo & \colcelltwo & \colcelltwo & \colcelltwo & & 
\\ \hline 
%%-------------------------------------------------------------------
%\rowcolor{Gray} 
\colcell 10:00-13:00 & \colcelltwo & \colcelltwo & \colcelltwo & \colcelltwo & \colcelltwo &   & 
\\ \hline 
%%-------------------------------------------------------------------
%\rowcolor{Gray} 
\colcell 13:00-16:00 & \colcelltwo & \colcelltwo & \colcelltwo & \colcelltwo & \colcelltwo & &
\\ \hline 
%%-------------------------------------------------------------------
%\rowcolor{Gray} 
\colcell 16:00-20:00 & & & \colcelltwo & & & &
\\ \hline 
%%-------------------------------------------------------------------
\end{tabularx}
\begin{tabularx}{\textwidth}{|X|l|l|l|l|l|l|l|X|}
\hline
%-------------------------------------------------------------------
\textbf{Week 2}& \colcell \textbf{Mon} & \colcell \textbf{Tue} & \colcell \textbf{Wed} & \colcell \textbf{Thu} & \colcell \textbf{Fri} & \colcell \textbf{Sat} & \colcell \textbf{Sun}
\\ \hline 
%%------------------------------------------------------------------- 
%\rowcolor{Gray} 
\colcell 08:00-10:00 (11:00-16:00) & \colcelltwo & \colcelltwo & \colcelltwo & \colcelltwo & \colcelltwo & & 
\\ \hline 
%%-------------------------------------------------------------------
%\rowcolor{Gray} 
\colcell 10:00-13:00 & \colcelltwo & \colcelltwo & \colcelltwo & \colcelltwo & \colcelltwo &   & 
\\ \hline 
%%-------------------------------------------------------------------
%\rowcolor{Gray} 
\colcell 13:00-16:00 & \colcelltwo & \colcelltwo & \colcelltwo & \colcelltwo & \colcelltwo & &
\\ \hline 
%%-------------------------------------------------------------------
%\rowcolor{Gray} 
\colcell 16:00-20:00 & & & \colcelltwo & & & &
\\ \hline 
%%-------------------------------------------------------------------
\end{tabularx}
\begin{tabularx}{\textwidth}{|X|l|l|l|l|l|l|l|X|}
\hline
%-------------------------------------------------------------------
\textbf{Week 3}& \colcell \textbf{Mon} & \colcell \textbf{Tue} & \colcell \textbf{Wed} & \colcell \textbf{Thu} & \colcell \textbf{Fri} & \colcell \textbf{Sat} & \colcell \textbf{Sun}
\\ \hline 
%%------------------------------------------------------------------- 
%\rowcolor{Gray} 
\colcell 08:00-10:00 (11:00-16:00) & \colcelltwo & \colcelltwo & \colcelltwo & \colcelltwo & \colcelltwo & & 
\\ \hline 
%%-------------------------------------------------------------------
%\rowcolor{Gray} 
\colcell 10:00-13:00 & \colcelltwo & \colcelltwo & \colcelltwo & \colcelltwo & \colcelltwo &   & 
\\ \hline 
%%-------------------------------------------------------------------
%\rowcolor{Gray} 
\colcell 13:00-16:00 & \colcelltwo & \colcelltwo & \colcelltwo & \colcelltwo & \colcelltwo & &
\\ \hline 
%%-------------------------------------------------------------------
%\rowcolor{Gray} 
\colcell 16:00-20:00 & & & \colcelltwo & & & &
\\ \hline 
%%-------------------------------------------------------------------
\end{tabularx}
\begin{tabularx}{\textwidth}{|X|l|l|l|l|l|l|l|X|}
\hline
%-------------------------------------------------------------------
\textbf{Week 4}& \colcell \textbf{Mon} & \colcell \textbf{Tue} & \colcell \textbf{Wed} & \colcell \textbf{Thu} & \colcell \textbf{Fri} & \colcell \textbf{Sat} & \colcell \textbf{Sun}
\\ \hline 
%%------------------------------------------------------------------- 
%\rowcolor{Gray} 
\colcell 08:00-10:00 (11:00-16:00) & \colcelltwo & \colcelltwo & \colcelltwo & \colcelltwo & \colcelltwo & \colcelltwo & \colcelltwo
\\ \hline 
%%-------------------------------------------------------------------
%\rowcolor{Gray} 
\colcell 10:00-13:00 & \colcelltwo & \colcelltwo & \colcelltwo & \colcelltwo & \colcelltwo &   & 
\\ \hline 
%%-------------------------------------------------------------------
%\rowcolor{Gray} 
\colcell 13:00-16:00 & \colcelltwo & \colcelltwo & \colcelltwo & \colcelltwo & \colcelltwo & &
\\ \hline 
%%-------------------------------------------------------------------
%\rowcolor{Gray} 
\colcell 16:00-20:00 & & & \colcelltwo & & \colcelltwo & &
\\ \hline 
%%-------------------------------------------------------------------
\end{tabularx}

\begin{tabularx}{\textwidth}{|X|l|l|l|l|l|l|l|X|}
\hline
%-------------------------------------------------------------------
\textbf{Week 5}& \colcell \textbf{Mon} & \colcell \textbf{Tue} & \colcell \textbf{Wed} & \colcell \textbf{Thu} & \colcell \textbf{Fri} & \colcell \textbf{Sat} & \colcell \textbf{Sun}
\\ \hline 
%%------------------------------------------------------------------- 
%\rowcolor{Gray} 
\colcell 08:00-10:00 (11:00-16:00) & \colcelltwo & \colcelltwo & \colcelltwo & & & & 
\\ \hline 
%%-------------------------------------------------------------------
%\rowcolor{Gray} 
\colcell 10:00-13:00 & \colcelltwo & \colcelltwo & \colcelltwo & & & & 
\\ \hline 
%%-------------------------------------------------------------------
%\rowcolor{Gray} 
\colcell 13:00-16:00 & \colcelltwo & \colcelltwo & \colcelltwo & & & &
\\ \hline 
%%-------------------------------------------------------------------
%\rowcolor{Gray} 
\colcell 16:00-20:00 & & & \colcelltwo & & & &
\\ \hline 
%%-------------------------------------------------------------------
\end{tabularx}
\end{table} 

Considering again the sample worker's schedule, it may look as if the worker can be scheduled for tasks at any yellow shift. However, there are regulations set by the library controlling how the outer tasks are to be distributed among the workers. The purpose of the regulations is to guarantee that the worker schedules are not too unbalanced or uncomfortable. 

There four basic demands of the resulting schedule. Firstly, workers are only allowed to take at a maximum one task per day. Secondly, workers only work at most weekend per five weeks. During this weekend it is customary that you work Friday evening shift, Saturday and Sunday shift consecutively, unless you are scheduled for Hageby, which is far away and is thus compensated by not entailing Friday evening work. Thirdly, weekend work is to be compensated by days off. There are a few possible variations of the weekend compensation, but usually the worker takes one and a half or two days off the week following upon weekend work. Lastly, a worker is only allowed to work one evening per week, excluding the Friday which belongs to the weekend week.
%
%Regulations say that:
%
%\begin{enumerate}
%\item A worker can at a maximum perform one task per day.
%\item A worker works only one weekend in five weeks.
%\item A worker must work Friday evening shift, Saturday shift and Sunday shift consecutively. For HB-workers, no Friday evening shift.
%\item A worker is only allowed to work one evening per week, excluding the Friday evening of the weekend week.
%\end{enumerate}

An example of a feasible schedule for the sample worker is provided in Table \ref{tab:Lib_feas_sched}. It should be noted that this schedule is created for a general worker and does not necessarily apply to all workers. Among workers, special availability restrictions due to odd-and even weeks exist and only a subset of the librarians are available for the Library on Wheels and Hageby. Also, some workers never work evening or weekend shifts.  

\begin{table}[!h]
\centering
\caption{Example of a feasible first week for the sample worker.}
\label{tab:Lib_feas_sched}
\begin{tabularx}{\textwidth}{|X|l|l|l|l|l|l|l|X|}
\hline
%-------------------------------------------------------------------
\textbf{Week 1} & \colcell \textbf{Mon} & \colcell \textbf{Tue} & \colcell \textbf{Wed} & \colcell \textbf{Thu} & \colcell \textbf{Fri} & \colcell \textbf{Sat} & \colcell \textbf{Sun}
\\ \hline 
%%------------------------------------------------------------------- 
%\rowcolor{Gray} 
\small \colcell 08:00-10:00 (11:00-16:00)& \colcelltwo & \small \colcellthree Exp & \colcelltwo & \small \colcellthree PL & \colcelltwo & & 
\\ \hline 
%%-------------------------------------------------------------------
%\rowcolor{Gray} 
\small \colcell 10:00-13:00 & \small \colcellthree Exp & \colcelltwo & \colcelltwo & \small \colcellthree PL & \colcelltwo & & 
\\ \hline 
%%-------------------------------------------------------------------
%\rowcolor{Gray} 
\small \colcell 13:00-16:00 & \colcelltwo & \colcelltwo & \colcelltwo & \small \colcellthree PL & \small \colcellthree Info & &
\\ \hline 
%%-------------------------------------------------------------------
%\rowcolor{Gray} 
\small \colcell 16:00-20:00 & & & \small \colcellthree Info& & & &
\\ \hline 
%%-------------------------------------------------------------------
\end{tabularx}
\end{table} 


\subsection{Scheduling objectives: stand-in maximization and schedule variation}

When we first were presented with the scheduling task, it was explained to us that the main challenge for the library is to find a good number stand ins for all days. When we studied their schedule, we observed that only one stand in was present at the worst day. Thus, the main objective of this thesis work is to create a feasible schedule with as many stand ins as possible at the worst day.

A stand-in is defined by the as a worker who is available for outer tasks during the first three shifts, and who is not scheduled for any shift that day. Both librarians and assistants can be scheduled as a stand-in, but only librarians are qualified to take emergency shifts at the Info desk. Since the regular library activity is the most crucial activity, there is no need for stand-ins during evening and weekends. Similarly, there are no assigned stand-ins for the Library on Wheels or for Hageby.

Apart from maximizing the number of stand-ins for each day at the library, it is desirable for the sake of the personnel to create schedules in which are repeated according to a five week pattern. Thus, the ten week schedule becomes two five week schedules. 

\section{Method}



\section{Topics Covered}













\iffalse



\begin{table}[h]
\centering
\caption{Overall schedule for week 1.}
\label{tab:General_schedule}
\begin{tabularx}{\textwidth}{|X|l|l|l|l|X|}
\hline
%-------------------------------------------------------------------
\textbf{Schedule week 1} & & & & &  
\\ \hline 
%%------------------------------------------------------------------- 
\textbf{Monday}& \colcell \textbf{Exp} & \colcell \textbf{Info} & \colcell \textbf{PL} & \colcell \textbf{LoW - odd} & \colcell \textbf{LoW- even} 
\\ \hline 
%%------------------------------------------------------------------- 

 08:00 - 10:00 & \small W1, W2 & \small W1,W2 & \small W1 & \small W1 & \small W1
\\ \hline 
%%------------------------------------------------------------------- 
 10:00 - 13:00 & \small W1, W2, W3 & \small W1, W2, W3 & \small W1 & - & -
\\ \hline 
%%------------------------------------------------------------------- 
 13:00 - 16:00 & \small W1, W2, W3 & \small W1, W2, W3 & \small W1 & - & -
\\ \hline 
%%------------------------------------------------------------------- 
 16:00 - 20:00 & \small W1, W2, W3 & \small W1, W2, W3 & \small W1 & - & -
\\ \hline 
%%------------------------------------------------------------------- 
\textbf{Tuesday}& \colcell \textbf{Exp} & \colcell \textbf{Info} & \colcell \textbf{PL} & \colcell \textbf{LoW - odd } & \colcell \textbf{LoW- even} 
\\ \hline 
%%------------------------------------------------------------------- 
\textbf{Wednesday}& \colcell \textbf{Exp} & \colcell \textbf{Info} & \colcell \textbf{PL} & \colcell \textbf{LoW - odd } & \colcell \textbf{LoW- even} 
\\ \hline 
%%-------------------------------------------------------------------
\textbf{Thursday}& \colcell \textbf{Exp} & \colcell \textbf{Info} & \colcell \textbf{PL} & \colcell \textbf{LoW - odd } & \colcell \textbf{LoW- even} 
\\ \hline 
%%-------------------------------------------------------------------
\textbf{Friday}& \colcell \textbf{Exp} & \colcell \textbf{Info} & \colcell \textbf{PL} & \colcell \textbf{LoW - odd } & \colcell \textbf{LoW- even} 
\\ \hline 
%%-------------------------------------------------------------------
\end{tabularx}
\end{table}

\fi
