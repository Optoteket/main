%A thorough description of the mathematical model in words and in math. More significant and general constraints in equations and less significant in words.
In this chapter the mathematical model implemented to solve the ten week scheduling problem described in Section \ref{problem_description} will be presented. Prior to the objective function and constraints, the most significant sets and variables will be provided. Section \ref{section:obj} presents the objective function and gives a short description of what it represents. In Section \ref{constraints}, the essential constraints will be presented and explained. A complete model with all definitions and the full set of constraints can be found in Appendix \ref{appendix:mathmod}. It should also be noted that the abbreviations for the different tasks in the mathematical model are: E for Exp, I for Info, P for PL, H for HB and B for BokB.%To get a full view of the mathematical problem the reader  A list of the defined parameters can be found in Appendix \ref{definitions}. 
\section{Set and variable definitions} \label{variables}
To solve the problem, many sets and variables have to be declared. As mentioned before, there are many unique and individual requirements given by the library that have to be met. An example is that some staff members have two alternating schedules for odd and even weeks. The specific cases have to be modelled and result in a variety of sets and variable definitions. Below, we focus on the common and general cases in order to keep the presentation simple and easily accessible. A complete list of the definitions can be found in Appendix \ref{appendix:mathmod}. The most important sets include: \\
\itab{$I$} \tab{Set of staff members}\\
\itab{$I_{lib}$} \tab{Set of librarians ($I_{lib} \subseteq I$)} \\
\itab{$I_{ass}$}	 \tab{Set of assistants ($I_{ass} \subseteq I$)}	\\
\itab{$I_{G}\{g\}$}	 \tab{Set of workers in the group g}	\\
\itab{$W$}                 \tab{Set of all ten weeks} \\
\itab{$W_5$}	\tab{Set of the first five weeks} \\
\itab{$D$}                 \tab{Set of all days in a week}           \\
\itab{$D_5$}	\tab{Set of all five weekdays} \\
\itab{$S_d$}           \tab{Set of shifts available on day \textit{d}}         \\
\itab{$S_3$}           \tab{Set of the first three shifts on a weekday}     \\
\itab{$J_d$}            \tab{Set of task types available on day \textit{d}}   \\
\itab{$G$}	 \tab{Set of groups}	\\
\itab{$V$}	 \tab{Set of possible week rotations (shifts the week by 0-9 steps forwards)}	\\

In order to further define the problem we introduce the following variables.
\begin{align}
    x_{iwdsj}&=
    \begin{cases}
      1, & \text{if staff member \textit{i} is assigned to a task \textit{j} in week \textit{w}, day \textit{d}, shift \textit{s}}\\
      0, & \text{otherwise}
    \end{cases}
    \\
    H_{iwh}&=
    \begin{cases}
      1, & \text{if staff member \textit{i} works weekend \textit{h} in week \textit{w}}\\
      0, & \text{otherwise}
    \end{cases}
	\\
	r_{iw}&=
	\begin{cases}
		1, & \text{if staff member \textit{i} has its schedule rotated \textit{w-1} steps forwards}\\
		0, & \text{otherwise}
	\end{cases}
	\\
	l_{iwd}&=
	\begin{cases}
	  1, & \text{if librarian \textit{i} is a stand-in week \textit{w}, day \textit{d}} \\
	  0, & \text{otherwise}
	\end{cases}
	\\
	a_{iwd}&=
	\begin{cases}
 		1, & \text{if assistant \textit{i} is a stand-in week \textit{w}, day \textit{d}} \\
 		0, & \text{otherwise}
	\end{cases}
	\\
	y_{iwds}&=
	\begin{cases}
 		1, & 
 		\parbox[t]{.7\textwidth}{if staff member \textit{i} works at task type E, I or P in week \textit{w}, day \textit{d}, shift \textit{s}} \\
 		0, & \text{otherwise}
	\end{cases}
	\\
	W_{iwd}&=
	\begin{cases}
	 	1, & \text{if a staff member \textit{i} is working a shift in week \textit{w}, day \textit{d}} \\
	 	0, & \text{otherwise}
	\end{cases}
	\\
	b_{iw}&=
	\begin{cases}
 		1, & \text{if staff member \textit{i} works at HB in week \textit{w}} \\
 		0, & \text{otherwise}
	\end{cases}
	\\
	f_{iw}&=
	\begin{cases}
 		1, & \text{if staff member \textit{i} is assigned to work Friday evening in week \textit{w}} \\
 		0, & \text{otherwise}
	\end{cases}	
	\\
	M_{wds}&=
	\begin{cases}
	 	1, & \text{if a big meeting is placed in week \textit{w}, day \textit{d}, shift \textit{s}} \\
	 	0, & \text{otherwise}
	\end{cases}
	\\
	m_{wdsg}&=
	\begin{cases}
	 	1, & \text{if a meeting is assigned for group \textit{g} in week \textit{w}, day \textit{d}, shift \textit{s}} \\
	 	0, & \text{otherwise}
	\end{cases}
	\\
	d_{iwds}&=
	\begin{cases}
	 	1, & \text{if there is a difference for a staff member \textit{i} in assignment of}\\
	 		& \text{ tasks at shift \textit{s}, day \textit{d} between weeks \textit{w} and \textit{w+5}} \\
	 	0, & \text{otherwise}
	\end{cases}
	\\
	l^{min}&= \text{lowest number of stand-in librarians found at a day (integer)} \\
	a^{min}&= \text{lowest number of stand-in assistants found at a day(integer)} \\
	s^{min}&= \text{weighted sum of numbers of stand-in librarians and assistants} \\
	\delta&= \text{total number of shifts that differ for all staff members (integer)}
\end{align}

Based on the variables defined above it has been possible to model and solve our scheduling problem. The variables \textit{$l^{min}$} and \textit{$a^{min}$} are the ones of most significance, as they represent the number of stand-ins found at the worst day after a run. 

\section{Objective function} \label{section:obj}
As the problem contains multiple objective functions, it has been necessary to weigh them against each other using parameters. These weights are shown in Equation \ref{objfcn} as $M$ and $N$.

\begin{equation} \label{objfcn}
\text{maximize} \hspace{0.3cm} M\cdot s^{min} - N \cdot \delta
\end{equation}
The first part of the objective function represents the lowest amount of stand-in librarians and assistants found at a day, while the second part minimizes the difference between the first and last five weeks. This means that week 1 and 6, 2 and 7 and so on should be as similar as possible. The parameter $N$ prioritizes the similarity of weeks compared to the number of stand-ins. Based on the information given by the library, there is a much higher priority to have many stand-ins. Hence, $M \gg N$, where $N > 0$ holds in our case. The exact relation between $M$ and $N$ is not of high importance, as we have seen that multiple optimal solutions exist, regarding the stand-ins. In our case, we set $M$ to be a hundred times bigger than $N$.




% % % % GO THROUGH THE REFERENCES TO CONSTRAINT SECTION IN THE DOCUMENT
\section{Constraints} \label{constraints}
In order to model the problem it is of relevance to divide many of the constraints into weekend and weekday constraints. Several auxiliary constraints and variables are also added to avoid multiplication of two variables, which would make the problem non-linear. These auxiliary constraints are needed as the solver CPLEX can not handle non-linear constraints, as it displays error messages in case they occur. The auxiliary constraints are left out of this chapter for simplicity reasons. Instead, they can be seen in Appendix \ref{appendix:mathmod}.

\subsection{Demand and assignment constraints} \label{section:demand_ass_constraints}
The most crucial constraint is to ensure that the demand of staff members is met each day. This can be modelled as
\begin{equation} \label{eq:demand}
\sum_{i \in I} x_{iwdsj} = demand_{wdsj}, \;   w\in W,d\in D,s\in S,j\in J_d
\end{equation}
Here, $demand_{wdsj}$ is an integer representing the number of staff members required in week \textit{w}, day \textit{d}, shift \textit{s} for a task \textit{j}.

The following constraint says whether or not a staff member is assigned a task during a weekday. Evening shifts and library on wheels tasks are excluded.
\begin{equation} \label{constr:y_assign}
y_{iwds} = \sum_{j \in J_d\backslash \{L\}} x_{iwdsj}, \;   i \in I, w \in W, d \in D_5, s \in S_3
\end{equation}
This variable assignment is used to simplify a couple of constraints later on.

To ensure that no staff members are assigned more than one task the following constraint is implemented.
\begin{equation} \label{constr:one_task_constraint}
\sum_{s\in S}\sum_{j\in J_d} x_{iwdsj} \leq 1, \;   i\in I, w \in W, d\in D
\end{equation}
However, if we allow a person to have two shifts at the library on wheels on a day, Equation \ref{constr:one_task_constraint} has to be slightly modified. This is left out of this chapter, but is allowed in the complete model.

For most staff members, it is preferred to allow only one PL per week and a maximum of three PL per ten weeks. These are easily modelled with the following constraints.
\begin{equation} \label{constr:one_PL}
\sum_{s \in S_d}\sum_{d \in D} x_{iwdsP} \leq 1, \;   i\in I, w \in W
\end{equation}
\begin{equation} \label{constr:three_PL}
\sum_{w \in W}\sum_{s \in S_d}\sum_{d \in D} x_{iwdsP} \leq 3, \;   i\in I
\end{equation}
The long duration of a PL (in the equations named "P"), is the reason for these preferences. Some staff members are required to have some time free from outer tasks, to be able to perform their inner tasks.

Another preference is to have varying work hours when it comes to the assignment of tasks. Then the more and less desired shifts will be fairly distributed. The following equation is implemented to meet such requirements.
\begin{equation} \label{constr:various_start_times}
\sum_{d \in D_5} y_{iwds} \leq 2, \;   i\in I, w \in W, s \in S_3
\end{equation}
Equation \ref{constr:various_start_times} allows a staff member to have at most two tasks starting at the same hour every week. Worth noting is that library on wheels is disregarded in this constraint as the variable $y_{iwds}$ is used, see Equation \ref{constr:y_assign} for the definition.

It is desirable to avoid assigning too many tasks to a staff member. The reason for this is, as mentioned previously, to let the staff member have some time to allot for inner services during weekdays. The equation below models this preference.
\begin{equation} \label{constr:four_weekly_shifts_at_most}
\sum_{d \in D_5}\sum_{s \in S_d}\sum_{j \in J_d} x_{iwdsj} \leq 4, \;   i\in I, w \in W
\end{equation}
Equation \ref{constr:four_weekly_shifts_at_most} allows a staff member at most four weekday shifts per week. The exception, which is one of the BokB staff members, is left out of this equation for simplicity reasons. To model that, a new subset of \textit{I} needs to be created where that staff member is left out. 
%Ändra till max 4 tasks per vecka diff {36}?

\subsection{Weekend and rotation constraints} \label{section:weekend_rot_constraints}
Every staff member's schedule can be rotated up to nine times, where the decision variable $r_{iv}$ decides the rotation. Therefore, the parameter $qualavail_{iwdsj}$ has to align with the rotation so that all staff members are assigned tasks only when available. This is provided in the following equation.
\begin{equation} \label{constr:qualavail}
x_{iwdsj} \leq \sum_{v \in V} r_{iv}*qualavail_{i\omega(v,w)dsj}, \;   i \in I, w \in W, d \in D, s \in S_d, j \in J_d
\end{equation}
The function $\omega(v,w)$ represents the modulus function $mod_{10}(w-v+10)+1$ and is a function which takes rotations into account when calculating the week to look for in the availability matrix. Table \ref{tab:mod} gives a better understanding of how this modulus function is used. 

The variable \textit{w}, in Table \ref{tab:mod}, represents the current week in the initial schedule, and \textit{v} represents \textit{v-1} rotations to the right from the initial schedule. With initial schedule, we refer to the schedule, where all staff members' weekends occur in the first week. The resulting week, when rotations have been taken into account, can be seen inside the cells. When scheduling, it is the resulting week $\omega$ which is of interest when checking if a staff member is available for a task assignment. 
\begin{table}[H]
\centering
\caption{Resulting table of the function $\omega(v,w) = mod_{10}(w-v+10)+1$. Here, $w$ is the week in the initial schedule, $v$ is the rotation variable. Inside the cells, the resulting week is shown when rotations have been made.}
\label{tab:mod}
\begin{tabular}{llllllllllll}
    &                         &                         &                         &                         &                         & \multicolumn{2}{l}{w =}                           &                         &                         &                         &                         \\
    &                         & 1                       & 2                       & 3                       & 4                       & 5                       & 6                       & 7                       & 8                       & 9                       & 10                      \\ \cline{3-12} 
    & \multicolumn{1}{l|}{1}  & \multicolumn{1}{l|}{1}  & \multicolumn{1}{l|}{2}  & \multicolumn{1}{l|}{3}  & \multicolumn{1}{l|}{4}  & \multicolumn{1}{l|}{5}  & \multicolumn{1}{l|}{6}  & \multicolumn{1}{l|}{7}  & \multicolumn{1}{l|}{8}  & \multicolumn{1}{l|}{9}  & \multicolumn{1}{l|}{10} \\ \cline{3-12} 
    & \multicolumn{1}{l|}{2}  & \multicolumn{1}{l|}{10} & \multicolumn{1}{l|}{1}  & \multicolumn{1}{l|}{2}  & \multicolumn{1}{l|}{3}  & \multicolumn{1}{l|}{4}  & \multicolumn{1}{l|}{5}  & \multicolumn{1}{l|}{6}  & \multicolumn{1}{l|}{7}  & \multicolumn{1}{l|}{8}  & \multicolumn{1}{l|}{9}  \\ \cline{3-12} 
    & \multicolumn{1}{l|}{3}  & \multicolumn{1}{l|}{9}  & \multicolumn{1}{l|}{10} & \multicolumn{1}{l|}{1}  & \multicolumn{1}{l|}{2}  & \multicolumn{1}{l|}{3}  & \multicolumn{1}{l|}{4}  & \multicolumn{1}{l|}{5}  & \multicolumn{1}{l|}{6}  & \multicolumn{1}{l|}{7}  & \multicolumn{1}{l|}{8}  \\ \cline{3-12} 
    & \multicolumn{1}{l|}{4}  & \multicolumn{1}{l|}{8}  & \multicolumn{1}{l|}{9}  & \multicolumn{1}{l|}{10} & \multicolumn{1}{l|}{1}  & \multicolumn{1}{l|}{2}  & \multicolumn{1}{l|}{3}  & \multicolumn{1}{l|}{4}  & \multicolumn{1}{l|}{5}  & \multicolumn{1}{l|}{6}  & \multicolumn{1}{l|}{7}  \\ \cline{3-12} 
v = & \multicolumn{1}{l|}{5}  & \multicolumn{1}{l|}{7}  & \multicolumn{1}{l|}{8}  & \multicolumn{1}{l|}{9}  & \multicolumn{1}{l|}{10} & \multicolumn{1}{l|}{1}  & \multicolumn{1}{l|}{2}  & \multicolumn{1}{l|}{3}  & \multicolumn{1}{l|}{4}  & \multicolumn{1}{l|}{5}  & \multicolumn{1}{l|}{6}  \\ \cline{3-12} 
    & \multicolumn{1}{l|}{6}  & \multicolumn{1}{l|}{6}  & \multicolumn{1}{l|}{7}  & \multicolumn{1}{l|}{8}  & \multicolumn{1}{l|}{9}  & \multicolumn{1}{l|}{10} & \multicolumn{1}{l|}{1}  & \multicolumn{1}{l|}{2}  & \multicolumn{1}{l|}{3}  & \multicolumn{1}{l|}{4}  & \multicolumn{1}{l|}{5}  \\ \cline{3-12} 
    & \multicolumn{1}{l|}{7}  & \multicolumn{1}{l|}{5}  & \multicolumn{1}{l|}{6}  & \multicolumn{1}{l|}{7}  & \multicolumn{1}{l|}{8}  & \multicolumn{1}{l|}{9}  & \multicolumn{1}{l|}{10} & \multicolumn{1}{l|}{1}  & \multicolumn{1}{l|}{2}  & \multicolumn{1}{l|}{3}  & \multicolumn{1}{l|}{4}  \\ \cline{3-12} 
    & \multicolumn{1}{l|}{8}  & \multicolumn{1}{l|}{4}  & \multicolumn{1}{l|}{5}  & \multicolumn{1}{l|}{6}  & \multicolumn{1}{l|}{7}  & \multicolumn{1}{l|}{8}  & \multicolumn{1}{l|}{9}  & \multicolumn{1}{l|}{10} & \multicolumn{1}{l|}{1}  & \multicolumn{1}{l|}{2}  & \multicolumn{1}{l|}{3}  \\ \cline{3-12} 
    & \multicolumn{1}{l|}{9}  & \multicolumn{1}{l|}{3}  & \multicolumn{1}{l|}{4}  & \multicolumn{1}{l|}{5}  & \multicolumn{1}{l|}{6}  & \multicolumn{1}{l|}{7}  & \multicolumn{1}{l|}{8}  & \multicolumn{1}{l|}{9}  & \multicolumn{1}{l|}{10} & \multicolumn{1}{l|}{1}  & \multicolumn{1}{l|}{2}  \\ \cline{3-12} 
    & \multicolumn{1}{l|}{10} & \multicolumn{1}{l|}{2}  & \multicolumn{1}{l|}{3}  & \multicolumn{1}{l|}{4}  & \multicolumn{1}{l|}{5}  & \multicolumn{1}{l|}{6}  & \multicolumn{1}{l|}{7}  & \multicolumn{1}{l|}{8}  & \multicolumn{1}{l|}{9}  & \multicolumn{1}{l|}{10} & \multicolumn{1}{l|}{1}  \\ \cline{3-12} 
\end{tabular}
\end{table}
An example to better understand the function: imagine that we are looking at an unrotated initial schedule where everyone is assumed to work weekend the first week. Say that we look at a staff member's first week, $w=1$. If this schedule is rotated two times to the right ($v=3$), then the first week in the new rotated schedule represents the previous ninth week, that is $w=9$ when no rotation exists. The availability to look at, in the initial schedule is, therefore, week nine.

Initially, all staff members are assigned weekend work the first week. Then, a week rotation variable is introduced that rotates the staff members' availability matrices so that the demand constraints on evenings and weekends can be met. The most basic constraints, regarding which week a staff member's weekend work occurs and its week rotation, can be seen below.

\begin{equation} \label{constr:one_rot}
\sum_{w \in W} r_{iw} = 1, \;   i\in I
\end{equation}
\begin{equation} \label{constr:max_one_weekend}
\sum_{w \in W} H_{iwh} \leq 1, \;   i\in I, h \in \{1,2\}
\end{equation}
\begin{equation} \label{constr:rot_weekend}
r_{iw} \geq H_{iw1}, \;   i\in I, w \in W
%	\begin{cases}
% 		1, & \text{if $H_{iwh=1} = 1$} \\
% 		0/1, & \text{otherwise}
%	\end{cases}
%	\;   i\in I, w \in W \;
\end{equation}

Equation \ref{constr:one_rot} provides all staff members with a rotation of their schedule regardless if they are working weekends or not. Equation \ref{constr:max_one_weekend} allows a staff member a maximum of two weekends, for $h=1$ and $h=2$, per ten weeks.

Once a staff member is assigned a new rotation, the availability matrix has to be correctly rotated. This is done using Equation \ref{constr:rot_weekend}. In case a staff member is never due for weekend work, that is, $H_{iwh} = 0, \; \forall i\in I, w \in W, h \in \{1,2\}$, then the rotation $r_{iw}$ is free, as its availability matrix is identical for all weeks. 

A staff member is supposed to work weekends with a five-week interval. However, in case there are enough staff members to satisfy the demand on weekends, it may be enough for some to only work one weekend per ten weeks. To avoid problems with the rotation if only the second weekend is assigned to a staff member, the following equation is used.
\begin{equation} \label{constr:five_week_interval}
r_{i(mod_{10}(w+4)+1)} \geq H_{iw2}, \;   i\in I, w \in W
\end{equation}
Worth noting is that if a staff member is assigned both weekends, then Equation \ref{constr:five_week_interval} provides the same information as Equation \ref{constr:rot_weekend}.

A staff member is supposed to work with the same task both Saturday and Sunday when working a weekend. This can be modelled with the following constraints.
\begin{equation} \label{constr:consecutive_days}
\sum_{j \in J_d} x_{iw61j} + \sum_{j \in J_d} x_{iw71j} = 2*\sum_{h = 1}^{2} H_{iwh}, \;   i\in I, w \in W
\end{equation}
\begin{equation} \label{constr:same_tasks}
x_{iw61j} = x_{iw71j}, \;   i\in I, w \in W, j \in J_d
\end{equation}
Equation \ref{constr:consecutive_days} ensures that the staff member will work Saturday and Sunday consecutively, whenever he or she is due for weekend work. To make sure it is the same task as well, Equation \ref{constr:same_tasks} is implemented.

Friday evening is also included in an extension to working Saturday and Sunday, unless the staff member is assigned to HB. It is, however, not a necessity to perform the same task Friday evening as during the weekend, thus Fridays are not included in Equation \ref{constr:same_tasks}. Equation \ref{constr:friday_added} below adds Fridays to the weekend.
\begin{equation} \label{constr:friday_added}
\sum_{j \in J \backslash \{L\}}x_{iw54j} = f_{iw}, \;   i \in I, w \in W
\end{equation}
Here, "L" refers to the task type library on wheels. The variable $f_{iw}$ is, as mentioned in the variable declaration, equal to one if and only if a staff member is working weekend as well as not being assigned to HB.

It is of interest to implement a constraint to prevent staff members from being assigned to HB more than once every ten weeks in order to avoid unfairness. Why this is preferable is described in Section \ref{section:library_tasks}. This constraint can be modelled as.
\begin{equation} \label{constr:max_one_hb}
\sum_{w \in W}\sum_{d = 6}^{7}x_{iwd1B} \leq 2, \;   i \in I
\end{equation}
Here, "B" refers to HB. Equation \ref{constr:same_tasks} and \ref{constr:max_one_hb} ensure both that a staff member only can be assigned to HB two days per ten weeks, and that those days are consecutive. The exception is in case a staff member only works in HB, which is disregarded in this simplified model.

\subsection{Objective function constraints} \label{section:obj_fcn_constraints}
The variable $\delta$ in the objective function, Equation \ref{objfcn}, is defined by the following equation.
\begin{equation} \label{constr:delta}
\delta = \sum_{i \in I} \sum_{w \in W_5} \sum_{d \in D_5} \sum_{s \in S_3} d_{iwds}
\end{equation}
This equation gives an integer value, which represents the total number of shift differences that occur for all workers, through all weekdays, in the library. The variable $d_{iwds}$, defined in Equation \ref{constr:obj_fcn_shifts} below, compares task assignments between two five-week separated weeks.

To calculate the variable $s^{min}$ used in the objective function, \ref{objfcn}, the following equation is used.
\begin{equation} \label{constr:s_min}
s^{min} \leq L\cdot \sum_{i \in I_{lib}} l_{iwd} + A\cdot \sum_{i \in I_{ass}} a_{iwd}, \;   w \in W, d \in D_5
\end{equation}
%\begin{equation} \label{constr:l_min}
%l^{min} \leq \sum_{i \in I_{lib}} l_{iwd}, \;   w \in W, d \in D_5
%\end{equation}
%\begin{equation} \label{constr:a_min}
%a^{min} \leq \sum_{i \in I_{ass}} a_{iwd}, \;   w \in W, d \in D_5
%\end{equation}

Here, $l_{iwd}$ and $a_{iwd}$ are binary variables stating whether a staff member is a stand-in on a day or not. Since $s^{min}$ is being maximized in the objective function, it will assume the lowest value of the sum of stand-in librarians and assistants for any day during the ten weeks. It will, therefore, represent the worst solution found regarding stand-ins. Just as for previous equations, auxiliary constraints have been left out for simplicity reasons. Here, it is left out how $l_{iwd}$ and $a_{iwd}$ are determined.

If $L < A$ holds in the model, the solver would prioritize assistants over librarians as stand-ins. Librarians are, however, more desired as stand-ins, due to their ability to perform all types of tasks. Therefore, it is desired to let $L \geq A$.

As stated in Section \ref{section:obj}, two weeks with a five-week interval should be as similar as possible. Equation \ref{constr:obj_fcn_shifts}, together with Equation \ref{constr:delta} and the objective function equation, \ref{objfcn}, provides this preference.
\begin{equation} \label{constr:obj_fcn_shifts}
d_{iwds} = \abs{y_{iwds} - y_{i(w+5)ds}}, \;   i \in I, w \in W_5, d \in D_5, s \in S_3
\end{equation}
The decision variable $d_{iwds}$ states if there is a difference in assignment between two tasks at the same hour and day for the two weeks, $w$ and $w+5$. The differences occur if, say, an Exp task is assigned on Monday week one at 8 a.m. to 10 a.m. and no task is assigned the same shift Monday week six. Thus, a variable that is minimized in the objective function.

\subsection{Meeting constraints} \label{section:meeting_constraints}
At the library there are both library meetings and group meetings, which both occur with a five-week interval. Library meetings are set to take place from 8 a.m. to 10 a.m. on Mondays, whereas group meetings are more freely distributed. A few staff members are not assigned library meetings, as they are needed in the library to keep it running. The set $I_{big}$ in the equation below consists of all staff members who are to be assigned library meetings. The constraints modelling library meetings are as follows.
\begin{equation} \label{constr:library_meetings}
\sum_{w \in W_5} M_{w11} = 1
\end{equation}
\begin{equation} \label{constr:library_meetings2}
M_{(w+5)11} = M_{w11}, \;   w \in W_5
\end{equation}
\begin{equation} \label{constr:library_meetings3}
\sum_{s=1}^{3} \sum_{j \in J_1 \backslash \{L\}} x_{iw1sj} \leq 1-M_{w11}, \;   i \in I \backslash I_{big}, w \in W
\end{equation}
Equation \ref{constr:library_meetings} and \ref{constr:library_meetings2} assign two library meetings with a five-week interval during the ten-week scheduling period. Equation \ref{constr:library_meetings3} makes sure that the staff members, that do not attend library meetings, are not assigned any other task during the day of the meeting. This implicitly force the staff members, that do not attend the library meetings, to meet the library demand constraints during the meeting. 

The constraints added to model the group meetings are somewhat similar to the library meeting constraints. Just as for library meetings, they take place two times during the ten weeks with a five-week interval, which is described by Equations \ref{constr:dep_meetings} and \ref{constr:dep_meetings2}.
\begin{equation} \label{constr:dep_meetings}
\sum_{w \in W_5}\sum_{d \in D_5}\sum_{s \in S_3} m_{wdsg} = 1, \; g \in G
\end{equation}
\begin{equation} \label{constr:dep_meetings2}
m_{(w+5)dsg} = m_{wdsg}, \;   g \in G, w \in W_5, d \in D_5, s \in S_3
\end{equation}
\begin{equation} \label{constr:dep_meetings3}
m_{wdsg} + x_{iwdsj} \leq 1, \;   g \in G, i \in I_{G}\{g\}, w \in W, d \in D_5, s \in S_3, j \in J_d
\end{equation}
\begin{equation} \label{constr:dep_meetings4}
m_{wdsg} \leq \sum_{v \in V} r_{iv}*qualavail_{i\omega(v,w)dsE}, \;   g \in G, i \in I_{G}\{g\}, w \in W, d \in D_5, s \in S_3
\end{equation}
Equation \ref{constr:dep_meetings3} prohibits a staff member from multitasking, that is, to attend a meeting and work with a task simultaneously. Equation \ref{constr:dep_meetings4} enables group meetings only when everyone in that group is available. The rotation is also taken into the account.

In Equation \ref{constr:dep_meetings4} $\omega$ is the week calculation when rotations are taken into the account, see Section \ref{section:weekend_rot_constraints}. The task type "E" stands for Exp, and is used due to it is the only task type everyone is available for, as \textit{qualavail} is dependent on the task variable \textit{j}. A better way to model this would be to create a new parameter, say $avail_{iwds}$, that is not dependent on staff member qualifications. As this way of modelling works, this was not implemented in order to to save us some time.

